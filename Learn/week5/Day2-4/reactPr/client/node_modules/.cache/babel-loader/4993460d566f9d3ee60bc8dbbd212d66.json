{"ast":null,"code":"import _defineProperty from\"C:/Users/he125/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/Dev/Git/Aihub_webTrack/Learn/week5/Day2-4/reactPr/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/he125/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/Dev/Git/Aihub_webTrack/Learn/week5/Day2-4/reactPr/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/he125/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/Dev/Git/Aihub_webTrack/Learn/week5/Day2-4/reactPr/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/he125/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/Dev/Git/Aihub_webTrack/Learn/week5/Day2-4/reactPr/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/he125/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/Dev/Git/Aihub_webTrack/Learn/week5/Day2-4/reactPr/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import{useEffect,useState}from\"react\";// import { useSelector } from \"react-redux\";\nimport url from\"./../../data/port.json\";import{useCookies}from\"react-cookie\";import $ from\"jquery\";import{useParams}from\"react-router-dom\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Update=function Update(){var navigate=useNavigate();var params=useParams();var _useCookies=useCookies([\"userData\"]),_useCookies2=_slicedToArray(_useCookies,3),cookies=_useCookies2[0],setCookie=_useCookies2[1],removeCookie=_useCookies2[2];var _useState=useState({}),_useState2=_slicedToArray(_useState,2),updateData=_useState2[0],setUpdateData=_useState2[1];// let getReduxShortId = useSelector(state => state.id.value);\nuseEffect(function(){findGetReviewData(params.id).then(function(res){console.log(res);setUpdateData(res.data);});},[]);var findGetReviewData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(url.url+\"/posts/\".concat(params.id,\"/find\"),{headers:{accessToken:cookies.userData.accessToken}});case 2:return _context.abrupt(\"return\",_context.sent);case 3:case\"end\":return _context.stop();}}},_callee);}));return function findGetReviewData(){return _ref.apply(this,arguments);};}();var onChangeUpdateData=function onChangeUpdateData(e){setUpdateData(_objectSpread(_objectSpread({},updateData),{},_defineProperty({},e.target.name,e.target.value)));};var onClickChangeUpdateData=function onClickChangeUpdateData(){if(updateData.img===\"\"){alert(\"이미지 경로를 입력해주세요.\");$(\"#img\").focus();return;}if(updateData.title===\"\"){alert(\"제목을 입력해주세요.\");$(\"#title\").focus();return;}if(updateData.content===\"\"){alert(\"내용을 입력해주세요.\");$(\"#content\").focus();return;}sendUpdateData().then(function(res){console.log(res);alert(res.data.result);navigate(\"/review/list\");});};var sendUpdateData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post(url.url+\"/posts/\".concat(params.id,\"/update\"),updateData,{headers:{accessToken:cookies.userData.accessToken}});case 2:return _context2.abrupt(\"return\",_context2.sent);case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function sendUpdateData(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"album\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-img-top\",style:{textAlign:\"center\"},children:/*#__PURE__*/_jsx(\"img\",{src:updateData.img,alt:\"movie img\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:\"Movie Img\"}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:\"Img Example\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",defaultValue:updateData.img,onChange:onChangeUpdateData,name:\"img\",disabled:true,id:\"img\",placeholder:\"\\uC0AC\\uC9C4 URL\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\"}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"url...\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",className:\"form-label\",children:\"\\uC81C\\uBAA9\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",defaultValue:updateData.title,onChange:onChangeUpdateData,name:\"title\",id:\"title\",placeholder:\"\\uC81C\\uBAA9\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"content\",className:\"form-label\",children:\"\\uB0B4\\uC6A9\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",name:\"content\",defaultValue:updateData.content,onChange:onChangeUpdateData,id:\"content\",rows:\"3\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline-primary\",onClick:onClickChangeUpdateData,style:{marginRight:\"2%\"},children:\"\\uC218\\uC815\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){window.history.back();},className:\"btn btn-outline-danger\",children:\"\\uB4A4\\uB85C\\uAC00\\uAE30\"})]})});};export default Update;","map":{"version":3,"names":["axios","useEffect","useState","url","useCookies","$","useParams","useNavigate","Update","navigate","params","cookies","setCookie","removeCookie","updateData","setUpdateData","findGetReviewData","id","then","res","console","log","data","get","headers","accessToken","userData","onChangeUpdateData","e","target","name","value","onClickChangeUpdateData","img","alert","focus","title","content","sendUpdateData","result","post","textAlign","marginRight","window","history","back"],"sources":["C:/Users/he125/OneDrive/바탕 화면/Dev/Git/Aihub_webTrack/Learn/week5/Day2-4/reactPr/client/src/pages/review/Update.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\n// import { useSelector } from \"react-redux\";\r\nimport url from \"./../../data/port.json\";\r\nimport { useCookies } from \"react-cookie\";\r\nimport $ from \"jquery\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst Update = () => {\r\n\r\n    const navigate = useNavigate();\r\n\r\n    const params = useParams();\r\n\r\n    const [cookies, setCookie, removeCookie] = useCookies([\"userData\"]);\r\n    const [updateData, setUpdateData] = useState({});\r\n\r\n    // let getReduxShortId = useSelector(state => state.id.value);\r\n\r\n    useEffect(() => {\r\n\r\n        findGetReviewData(params.id).then(res => {\r\n            console.log(res);\r\n            setUpdateData(res.data);\r\n        });\r\n\r\n    }, []);\r\n\r\n    const findGetReviewData = async () => {\r\n        return await axios.get(url.url + `/posts/${params.id}/find`, {\r\n            headers: {\r\n                accessToken: cookies.userData.accessToken\r\n            }\r\n        });\r\n    }\r\n\r\n    const onChangeUpdateData = (e) => {\r\n        setUpdateData({\r\n            ...updateData,\r\n            [e.target.name]: e.target.value\r\n        })\r\n    }\r\n\r\n\r\n    const onClickChangeUpdateData = () => {\r\n        if (updateData.img === \"\") {\r\n            alert(\"이미지 경로를 입력해주세요.\");\r\n            $(\"#img\").focus();\r\n            return;\r\n        }\r\n\r\n        if (updateData.title === \"\") {\r\n            alert(\"제목을 입력해주세요.\");\r\n            $(\"#title\").focus();\r\n            return;\r\n        }\r\n\r\n        if (updateData.content === \"\") {\r\n            alert(\"내용을 입력해주세요.\");\r\n            $(\"#content\").focus();\r\n            return;\r\n        }\r\n\r\n        sendUpdateData().then((res) => {\r\n            console.log(res);\r\n            alert(res.data.result);\r\n            navigate(\"/review/list\");\r\n        })\r\n\r\n    }\r\n\r\n    const sendUpdateData = async () => {\r\n        return await axios.post(url.url + `/posts/${params.id}/update`, updateData, {\r\n            headers: {\r\n                accessToken: cookies.userData.accessToken\r\n            }\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"album\">\r\n            <div className=\"container\">\r\n                <div className=\"card mb-3\">\r\n                    <div className=\"card-img-top\" style={{ textAlign: \"center\" }}>\r\n                        <img src={updateData.img}\r\n                            alt=\"movie img\" />\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                        <h5 className=\"card-title\">Movie Img</h5>\r\n                        <p className=\"card-text\">\r\n                            Img Example\r\n                        </p>\r\n                        <input type=\"text\" className=\"form-control\" defaultValue={updateData.img}\r\n                            onChange={onChangeUpdateData} name=\"img\" disabled\r\n                            id=\"img\" placeholder=\"사진 URL을 입력해주세요.\" />\r\n                        <p className=\"card-text\"><small className=\"text-muted\">url...</small></p>\r\n                    </div>\r\n                </div>\r\n                <div className=\"mb-3\">\r\n                    <label htmlFor=\"title\" className=\"form-label\">제목</label>\r\n                    <input type=\"text\" className=\"form-control\" defaultValue={updateData.title}\r\n                        onChange={onChangeUpdateData} name=\"title\"\r\n                        id=\"title\" placeholder=\"제목을 입력해주세요.\" />\r\n                </div>\r\n                <div className=\"mb-3\">\r\n                    <label htmlFor=\"content\" className=\"form-label\">내용</label>\r\n                    <textarea className=\"form-control\" name=\"content\" defaultValue={updateData.content}\r\n                        onChange={onChangeUpdateData} id=\"content\"\r\n                        rows=\"3\"></textarea>\r\n                </div>\r\n                <button type=\"button\" className=\"btn btn-outline-primary\"\r\n                    onClick={onClickChangeUpdateData}\r\n                    style={{ marginRight: \"2%\" }}>수정</button>\r\n                <button type=\"button\" onClick={() => {\r\n                    window.history.back();\r\n                }} className=\"btn btn-outline-danger\">뒤로가기</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Update;"],"mappings":"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"},"metadata":{},"sourceType":"module"}