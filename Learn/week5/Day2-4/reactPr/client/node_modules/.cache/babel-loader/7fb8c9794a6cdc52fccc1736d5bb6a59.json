{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/he125/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/Dev/Git/Aihub_webTrack/Learn/week5/Day2-4/reactPr/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/he125/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/Dev/Git/Aihub_webTrack/Learn/week5/Day2-4/reactPr/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/he125/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/Dev/Git/Aihub_webTrack/Learn/week5/Day2-4/reactPr/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import $ from\"jquery\";import axios from\"axios\";import port from\"./../../data/port.json\";import{useNavigate}from\"react-router-dom\";import{useState}from\"react\";import{useCookies}from\"react-cookie\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SignInForm=function SignInForm(_ref){var signInData=_ref.signInData,onChangeSignInData=_ref.onChangeSignInData;var _useCookies=useCookies([\"userData\"]),_useCookies2=_slicedToArray(_useCookies,3),cookies=_useCookies2[0],setCookie=_useCookies2[1],removeCookie=_useCookies2[2];var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),errorMessage=_useState2[0],setErrorMessage=_useState2[1];var onClickLoginButton=function onClickLoginButton(){if(signInData.email===\"\"){alert(\"이메일을 입력해주세요.\");$(\"#email\").focus();return;}if(signInData.password===\"\"){alert(\"비밀번호를 입력해주세요.\");$(\"#password\").focus();return;}sendSignInData().then(function(res){console.log(res);setCookie(\"userData\",res.data,{path:\"/\"});alert(\"로그인이 완료되었습니다.\");navigate(\"/review/list\");}).catch(function(e){console.log(e);setErrorMessage(e.response.data.fail);});};var sendSignInData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post(port.url+'/user/login',signInData);case 2:return _context.abrupt(\"return\",_context.sent);case 3:case\"end\":return _context.stop();}}},_callee);}));return function sendSignInData(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"album\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"form-label\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:signInData.email,onChange:onChangeSignInData,className:\"form-control\",name:\"email\",id:\"email\",\"aria-describedby\":\"emailHelp\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"form-label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:signInData.password,onChange:onChangeSignInData,name:\"password\",className:\"form-control\",id:\"password\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:errorMessage})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClickLoginButton,className:\"btn btn-primary\",children:\"\\uB85C\\uADF8\\uC778\"})]})})});};export default SignInForm;","map":{"version":3,"names":["$","axios","port","useNavigate","useState","useCookies","SignInForm","signInData","onChangeSignInData","cookies","setCookie","removeCookie","navigate","errorMessage","setErrorMessage","onClickLoginButton","email","alert","focus","password","sendSignInData","then","res","console","log","data","path","catch","e","response","fail","post","url"],"sources":["C:/Users/he125/OneDrive/바탕 화면/Dev/Git/Aihub_webTrack/Learn/week5/Day2-4/reactPr/client/src/pages/user/SignInForm.js"],"sourcesContent":["import $ from \"jquery\";\r\nimport axios from \"axios\";\r\nimport port from \"./../../data/port.json\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useState } from \"react\";\r\n\r\nimport { useCookies } from \"react-cookie\";\r\n\r\nconst SignInForm = ({ signInData, onChangeSignInData }) => {\r\n\r\n    const [cookies, setCookie, removeCookie] = useCookies([\"userData\"]);\r\n\r\n    const navigate = useNavigate();\r\n\r\n    const [errorMessage, setErrorMessage] = useState(\"\");\r\n\r\n    const onClickLoginButton = () => {\r\n\r\n        if (signInData.email === \"\") {\r\n            alert(\"이메일을 입력해주세요.\");\r\n            $(\"#email\").focus();\r\n            return;\r\n        }\r\n\r\n        if (signInData.password === \"\") {\r\n            alert(\"비밀번호를 입력해주세요.\");\r\n            $(\"#password\").focus();\r\n            return;\r\n        }\r\n\r\n        sendSignInData().then(res => {\r\n            console.log(res);\r\n            setCookie(\"userData\", res.data, { path: \"/\" });\r\n            alert(\"로그인이 완료되었습니다.\");\r\n            navigate(\"/review/list\");\r\n        }).catch(e => {\r\n            console.log(e);\r\n            setErrorMessage(e.response.data.fail);\r\n        });\r\n    }\r\n\r\n    const sendSignInData = async () => {\r\n        return await axios.post(port.url + '/user/login', signInData);\r\n    }\r\n\r\n    return (\r\n        <div className=\"album\">\r\n            <div className=\"container\">\r\n                <form>\r\n                    <div className=\"mb-3\">\r\n                        <label htmlFor=\"email\" className=\"form-label\">Email address</label>\r\n                        <input type=\"email\" value={signInData.email} onChange={onChangeSignInData} className=\"form-control\" name=\"email\" id=\"email\" aria-describedby=\"emailHelp\" />\r\n                    </div>\r\n                    <div className=\"mb-3\">\r\n                        <label htmlFor=\"password\" className=\"form-label\">Password</label>\r\n                        <input type=\"password\" value={signInData.password} onChange={onChangeSignInData} name=\"password\" className=\"form-control\" id=\"password\" />\r\n                    </div>\r\n                    <div className=\"mb-3\">\r\n                        <p className=\"text-danger\">\r\n                            {errorMessage}\r\n                        </p>\r\n                    </div>\r\n                    <button type=\"button\"\r\n                        onClick={onClickLoginButton}\r\n                        className=\"btn btn-primary\">로그인</button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SignInForm;"],"mappings":"glBAAA,MAAOA,EAAP,KAAc,QAAd,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,MAAOC,KAAP,KAAiB,wBAAjB,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,QAAT,KAAyB,OAAzB,CAEA,OAASC,UAAT,KAA2B,cAA3B,C,wFAEA,GAAMC,WAAU,CAAG,QAAbA,WAAa,MAAwC,IAArCC,WAAqC,MAArCA,UAAqC,CAAzBC,kBAAyB,MAAzBA,kBAAyB,CAEvD,gBAA2CH,UAAU,CAAC,CAAC,UAAD,CAAD,CAArD,4CAAOI,OAAP,iBAAgBC,SAAhB,iBAA2BC,YAA3B,iBAEA,GAAMC,SAAQ,CAAGT,WAAW,EAA5B,CAEA,cAAwCC,QAAQ,CAAC,EAAD,CAAhD,wCAAOS,YAAP,eAAqBC,eAArB,eAEA,GAAMC,mBAAkB,CAAG,QAArBA,mBAAqB,EAAM,CAE7B,GAAIR,UAAU,CAACS,KAAX,GAAqB,EAAzB,CAA6B,CACzBC,KAAK,CAAC,cAAD,CAAL,CACAjB,CAAC,CAAC,QAAD,CAAD,CAAYkB,KAAZ,GACA,OACH,CAED,GAAIX,UAAU,CAACY,QAAX,GAAwB,EAA5B,CAAgC,CAC5BF,KAAK,CAAC,eAAD,CAAL,CACAjB,CAAC,CAAC,WAAD,CAAD,CAAekB,KAAf,GACA,OACH,CAEDE,cAAc,GAAGC,IAAjB,CAAsB,SAAAC,GAAG,CAAI,CACzBC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACAZ,SAAS,CAAC,UAAD,CAAaY,GAAG,CAACG,IAAjB,CAAuB,CAAEC,IAAI,CAAE,GAAR,CAAvB,CAAT,CACAT,KAAK,CAAC,eAAD,CAAL,CACAL,QAAQ,CAAC,cAAD,CAAR,CACH,CALD,EAKGe,KALH,CAKS,SAAAC,CAAC,CAAI,CACVL,OAAO,CAACC,GAAR,CAAYI,CAAZ,EACAd,eAAe,CAACc,CAAC,CAACC,QAAF,CAAWJ,IAAX,CAAgBK,IAAjB,CAAf,CACH,CARD,EASH,CAvBD,CAyBA,GAAMV,eAAc,6FAAG,2JACNnB,MAAK,CAAC8B,IAAN,CAAW7B,IAAI,CAAC8B,GAAL,CAAW,aAAtB,CAAqCzB,UAArC,CADM,6GAAH,kBAAda,eAAc,2CAApB,CAIA,mBACI,YAAK,SAAS,CAAC,OAAf,uBACI,YAAK,SAAS,CAAC,WAAf,uBACI,qCACI,aAAK,SAAS,CAAC,MAAf,wBACI,cAAO,OAAO,CAAC,OAAf,CAAuB,SAAS,CAAC,YAAjC,2BADJ,cAEI,cAAO,IAAI,CAAC,OAAZ,CAAoB,KAAK,CAAEb,UAAU,CAACS,KAAtC,CAA6C,QAAQ,CAAER,kBAAvD,CAA2E,SAAS,CAAC,cAArF,CAAoG,IAAI,CAAC,OAAzG,CAAiH,EAAE,CAAC,OAApH,CAA4H,mBAAiB,WAA7I,EAFJ,GADJ,cAKI,aAAK,SAAS,CAAC,MAAf,wBACI,cAAO,OAAO,CAAC,UAAf,CAA0B,SAAS,CAAC,YAApC,sBADJ,cAEI,cAAO,IAAI,CAAC,UAAZ,CAAuB,KAAK,CAAED,UAAU,CAACY,QAAzC,CAAmD,QAAQ,CAAEX,kBAA7D,CAAiF,IAAI,CAAC,UAAtF,CAAiG,SAAS,CAAC,cAA3G,CAA0H,EAAE,CAAC,UAA7H,EAFJ,GALJ,cASI,YAAK,SAAS,CAAC,MAAf,uBACI,UAAG,SAAS,CAAC,aAAb,UACKK,YADL,EADJ,EATJ,cAcI,eAAQ,IAAI,CAAC,QAAb,CACI,OAAO,CAAEE,kBADb,CAEI,SAAS,CAAC,iBAFd,gCAdJ,GADJ,EADJ,EADJ,CAwBH,CA7DD,CA+DA,cAAeT,WAAf"},"metadata":{},"sourceType":"module"}